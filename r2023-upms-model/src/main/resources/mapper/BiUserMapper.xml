<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="cn.bipark.reco.upms.model.mapper.BiUserMapper">
	
	<sql id="UserWhere">
		<where>	      				
	       <if test="@Ognl@isNotEmpty(username)">
				AND t.username = #{username}
			</if>
	       <if test="@Ognl@isNotEmpty(password)">
				AND t.password = #{password}
			</if>
	       <if test="@Ognl@isNotEmpty(nick)">
				AND t.nick = #{nick}
			</if>
	       <if test="@Ognl@isNotEmpty(email)">
				AND t.email = #{email}
			</if>
	       <if test="@Ognl@isNotEmpty(phone)">
				AND t.phone = #{phone}
			</if>
	       <if test="@Ognl@isNotEmpty(team)">
				AND t.team = #{team}
			</if>
		</where>
	</sql>

    <select id="findBy" resultType="cn.bipark.reco.upms.model.viewmodel.list.UserListVM">
    	SELECT 
			t.id				id,
			t.username				username,
			t.password				password,
			t.nick				nick,
			t.email				email,
			t.phone				phone,
			t.team				team
	    FROM bi_user t 
		<include refid="UserWhere"/>		
		<if test="@Ognl@isNotEmpty(orderBy)">
			ORDER BY ${orderBy}
		</if>
    </select>
	
</mapper>

