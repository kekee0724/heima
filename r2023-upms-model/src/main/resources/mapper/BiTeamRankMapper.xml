<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="cn.bipark.reco.upms.model.mapper.BiTeamRankMapper">
	
	<sql id="TeamRankWhere">
		<where>	      				
	       <if test="@Ognl@isNotEmpty(levelId)">
				AND t.level_id = #{levelId}
			</if>
	       <if test="@Ognl@isNotEmpty(teamId)">
				AND t.team_id = #{teamId}
			</if>
	       <if test="@Ognl@isNotEmpty(participants)">
				AND t.participants = #{participants}
			</if>
	       <if test="@Ognl@isNotEmpty(totalUser)">
				AND t.total_user = #{totalUser}
			</if>
	       <if test="@Ognl@isNotEmpty(totalScore)">
				AND t.total_score = #{totalScore}
			</if>
	       <if test="@Ognl@isNotEmpty(totalTime)">
				AND t.total_time = #{totalTime}
			</if>
	       <if test="@Ognl@isNotEmpty(averageScore)">
				AND t.average_score = #{averageScore}
			</if>
	       <if test="@Ognl@isNotEmpty(partyRate)">
				AND t.party_rate = #{partyRate}
			</if>
	       <if test="@Ognl@isNotEmpty(averageTime)">
				AND t.average_time = #{averageTime}
			</if>
	       <if test="@Ognl@isNotEmpty(rankNum)">
				AND t.rank_num = #{rankNum}
			</if>
	       <if test="@Ognl@isNotEmpty(isOut)">
				AND t.is_out = #{isOut}
			</if>
		</where>
	</sql>

    <select id="findBy" resultType="cn.bipark.reco.upms.model.viewmodel.list.TeamRankListVM">
    	SELECT 
			t.id				id,
			t.level_id				levelId,
			t.team_id				teamId,
			t.participants				participants,
			t.total_user				totalUser,
			t.total_score				totalScore,
			t.total_time				totalTime,
			t.average_score				averageScore,
			t.party_rate				partyRate,
			t.average_time				averageTime,
			t.rank_num				rankNum,
			t.is_out				isOut
	    FROM bi_team_rank t 
		<include refid="TeamRankWhere"/>		
		<if test="@Ognl@isNotEmpty(orderBy)">
			ORDER BY ${orderBy}
		</if>
    </select>
	
</mapper>

