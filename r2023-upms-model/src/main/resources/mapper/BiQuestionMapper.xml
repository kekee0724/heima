<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="cn.bipark.reco.upms.model.mapper.BiQuestionMapper">
	
	<sql id="QuestionWhere">
		<where>	      				
	       <if test="@Ognl@isNotEmpty(questionnaireId)">
				AND t.questionnaire_id = #{questionnaireId}
			</if>
	       <if test="@Ognl@isNotEmpty(logicalType)">
				AND t.logical_type = #{logicalType}
			</if>
	       <if test="@Ognl@isNotEmpty(businessType)">
				AND t.business_type = #{businessType}
			</if>
	       <if test="@Ognl@isNotEmpty(sequence)">
				AND t.sequence = #{sequence}
			</if>
	       <if test="@Ognl@isNotEmpty(isLibrary)">
				AND t.is_library = #{isLibrary}
			</if>
	       <if test="@Ognl@isNotEmpty(isBuiltin)">
				AND t.is_builtin = #{isBuiltin}
			</if>
	       <if test="@Ognl@isNotEmpty(description)">
				AND t.description = #{description}
			</if>
	       <if test="@Ognl@isNotEmpty(inputerId)">
				AND t.inputer_id = #{inputerId}
			</if>
	       <if test="@Ognl@isNotEmpty(inputTimeBegin)">
				AND t.input_time >= #{inputTimeBegin}
		   </if>
		   <if test="@Ognl@isNotEmpty(inputTimeEnd)">
				AND t.input_time &lt;= #{inputTimeEnd}
		   </if>
	       <if test="@Ognl@isNotEmpty(title)">
				AND t.title = #{title}
			</if>
	       <if test="@Ognl@isNotEmpty(type)">
				AND t.type = #{type}
			</if>
	       <if test="@Ognl@isNotEmpty(content)">
				AND t.content = #{content}
			</if>
	       <if test="@Ognl@isNotEmpty(answer)">
				AND t.answer = #{answer}
			</if>
	       <if test="@Ognl@isNotEmpty(options)">
				AND t.options = #{options}
			</if>
	       <if test="@Ognl@isNotEmpty(score)">
				AND t.score = #{score}
			</if>
		</where>
	</sql>

    <select id="findBy" resultType="cn.bipark.reco.upms.model.viewmodel.list.QuestionListVM">
    	SELECT 
			t.id				id,
			t.questionnaire_id				questionnaireId,
			t.logical_type				logicalType,
			t.business_type				businessType,
			t.sequence				sequence,
			t.is_library				isLibrary,
			t.is_builtin				isBuiltin,
			t.description				description,
			t.inputer_id				inputerId,
			t.inputer				inputer,
			t.updater_id				updaterId,
			t.updater				updater,
			t.input_time				inputTime,
			t.update_time				updateTime,
			t.is_delete				isDelete,
			t.title				title,
			t.type				type,
			t.content				content,
			t.answer				answer,
			t.options				options,
			t.score				score
	    FROM bi_question t 
		<include refid="QuestionWhere"/>		
		<if test="@Ognl@isNotEmpty(orderBy)">
			ORDER BY ${orderBy}
		</if>
    </select>
	
</mapper>

